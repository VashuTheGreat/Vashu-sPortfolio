<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Other Activities - Vashu</title>
  
  <!-- External CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      background: linear-gradient(to right, #1f2937, #111827);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    nav a { text-decoration: none; }

    /* Project Card Styles */
    .project-card {
      display: flex;
      flex-direction: row;
      gap: 20px;
      border-radius: 10px;
      overflow: hidden;
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      border: 1px solid #374151;
      margin-bottom: 20px;
      align-items: center;
    }

    .project-card.reverse {
      flex-direction: row-reverse;
    }

    .project-card:hover {
      transform: translateY(-5px);
      border-color: #a855f7;
      box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3);
    }

    .project-card img.thumb {
      width: 300px;
      height: 200px;
      object-fit: cover;
      flex-shrink: 0;
      border-radius: 8px;
    }

    .project-card .info {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .project-card .info .title {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: #00eaff;
    }

    .project-card .info .link {
      color: #ff4d4d;
      text-decoration: none;
      font-weight: 500;
    }

    /* LeetCode Stats Styles */
    .attempting-text {
        position: absolute;
        bottom: 25px;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 0.75rem;
        color: #9ca3af;
    }

    @media (max-width: 768px) {
      .project-card, .project-card.reverse {
        flex-direction: column;
      }
      .project-card img.thumb {
        width: 100%;
        height: 200px;
      }
    }
  </style>
</head>

<body>

  <!-- Navbar -->
  <nav class="bg-gradient-to-r from-gray-900 to-blue-900 p-4 sticky top-0 z-50 shadow-lg">
    <div class="container mx-auto flex justify-between sm:justify-evenly items-center">
      <a href="/">
        <div class="logo text-white text-xl md:text-2xl font-bold">Vashu's Portfolio</div>
      </a>

      <button class="md:hidden text-white" id="menuToggle">
        <i class="fas fa-bars" id="menuIcon"></i>
      </button>

      <ul class="md:flex space-x-6 text-white hidden" id="desktopMenu"> 
        <a href="/"><li class="cursor-pointer hover:text-purple-400 transition-colors">Home</li></a>
        <a href="/about"><li class="cursor-pointer hover:text-purple-400 transition-colors">About</li></a>
        <a href="/otheractivities">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">Other Activities</li>
        </a>
        <a href="/contact"><li class="cursor-pointer hover:text-purple-400 transition-colors">Contact Me</li></a>
      </ul>
    </div>

    <ul class="md:hidden bg-gray-800 text-white p-4 flex flex-col space-y-4 items-center hidden" id="mobileMenu">
      <a href="/"><li class="cursor-pointer hover:text-purple-400 transition-colors">Home</li></a>
      <a href="/about"><li class="cursor-pointer hover:text-purple-400 transition-colors">About</li></a>
      <a href="/otheractivities">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">Other Activities</li>
        </a>
      <a href="/contact"><li class="cursor-pointer hover:text-purple-400 transition-colors">Contact Me</li></a>
    </ul>
  </nav>

  <!-- Main Content -->
  <div class="flex-grow container mx-auto p-6 flex flex-col items-center gap-12">
    
    <!-- LeetCode Stats Section -->
    <a class="w-full flex justify-center mt-8 cursor-pointer" onclick="gotoLeetcode()" >
        <div class="bg-[#282828] p-6 rounded-xl shadow-2xl flex flex-row items-center gap-12 max-w-lg w-full border border-gray-700">
            
            <!-- Left: Circle Chart -->
            <div class="relative w-48 h-48 flex-shrink-0">
                <svg class="-rotate-90 transform w-full h-full" viewBox="0 0 200 200">
                    <!-- Background Track -->
                    <circle cx="100" cy="100" stroke-width="6" r="90" stroke="#3e3e3e" fill="none"></circle>
                    
                    <!-- Segments -->
                    <!-- Easy (Teal) -->
                    <circle id="circle-easy" cx="100" cy="100" stroke-width="6" r="90" stroke="#00b8a3" fill="none" stroke-linecap="round" stroke-dasharray="0 565" stroke-dashoffset="0" class="transition-all duration-1000 ease-out"></circle>
                    
                    <!-- Medium (Yellow) -->
                    <circle id="circle-medium" cx="100" cy="100" stroke-width="6" r="90" stroke="#ffc01e" fill="none" stroke-linecap="round" stroke-dasharray="0 565" stroke-dashoffset="0" class="transition-all duration-1000 ease-out"></circle>
                    
                    <!-- Hard (Red) -->
                    <circle id="circle-hard" cx="100" cy="100" stroke-width="6" r="90" stroke="#ff375f" fill="none" stroke-linecap="round" stroke-dasharray="0 565" stroke-dashoffset="0" class="transition-all duration-1000 ease-out"></circle>
                </svg>
                
                <!-- Center Text -->
                <div class="absolute inset-0 flex flex-col items-center justify-center text-white z-10">
                    <div class="flex items-baseline">
                        <span id="total-solved" class="text-5xl font-bold tracking-tighter">--</span>
                    </div>
                    <div id="total-questions" class="text-gray-400 text-xs mt-1">/--</div>
                    
                    <div class="flex items-center gap-1 mt-2">
                        <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                        <span class="text-gray-300 text-sm font-medium uppercase tracking-wide">Solved</span>
                    </div>
                </div>
            </div>

            <!-- Right: Stats List -->
            <div class="flex flex-col gap-4 w-full">
                
                <!-- Easy Card -->
                <div class="bg-[#333333] rounded-lg px-4 py-3 flex flex-col justify-center min-w-[140px]">
                    <span class="text-[#00b8a3] text-sm font-medium mb-1">Easy</span>
                    <div class="flex items-baseline gap-1">
                        <span id="easy-solved" class="text-white font-bold text-xl">--</span>
                        <span id="easy-total" class="text-gray-500 text-xs">/--</span>
                    </div>
                </div>

                <!-- Medium Card -->
                <div class="bg-[#333333] rounded-lg px-4 py-3 flex flex-col justify-center min-w-[140px]">
                    <span class="text-[#ffc01e] text-sm font-medium mb-1">Med.</span>
                    <div class="flex items-baseline gap-1">
                        <span id="medium-solved" class="text-white font-bold text-xl">--</span>
                        <span id="medium-total" class="text-gray-500 text-xs">/--</span>
                    </div>
                </div>

                <!-- Hard Card -->
                <div class="bg-[#333333] rounded-lg px-4 py-3 flex flex-col justify-center min-w-[140px]">
                    <span class="text-[#ff375f] text-sm font-medium mb-1">Hard</span>
                    <div class="flex items-baseline gap-1">
                        <span id="hard-solved" class="text-white font-bold text-xl">--</span>
                        <span id="hard-total" class="text-gray-500 text-xs">/--</span>
                    </div>
                </div>

            </div>
        </div>
      </a>

    <!-- Other Projects Section -->
    <div class="w-full max-w-4xl">
        <h1 class="text-3xl font-bold text-center mb-8 text-purple-400">Other Projects</h1>
        <div id="list"></div>
    </div>

  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-6 mt-auto">
    <div class="container mx-auto flex flex-col md:flex-row justify-between items-center px-6">
      <div class="mb-4 md:mb-0">
        <h2 class="text-2xl font-bold text-purple-500">Vashu</h2>
      </div>

      <ul class="flex space-x-6 text-gray-400">
        <li><a href="./" class="hover:text-purple-400 cursor-pointer transition-colors">Home</a></li>
        <li><a href="./about" class="hover:text-purple-400 cursor-pointer transition-colors">About</a></li>
        <a href="/otheractivities">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">Other Activities</li>
        </a>
        <li><a href="./contact" class="hover:text-purple-400 cursor-pointer transition-colors">Contact</a></li>
      </ul>

      <div class="flex space-x-4">
        <a href="#" class="hover:text-purple-400 transition-colors"><i class="fab fa-github text-2xl"></i></a>
        <a href="#" class="hover:text-purple-400 transition-colors"><i class="fab fa-linkedin text-2xl"></i></a>
        <a href="#" class="hover:text-purple-400 transition-colors"><i class="fab fa-twitter text-2xl"></i></a>
      </div>
    </div>

    <div class="text-center text-gray-500 text-sm mt-4">
      Â© <script>document.write(new Date().getFullYear());</script> Vashu. All rights reserved.
    </div>
  </footer>

  <!-- Scripts -->
  <script>

    // Inject attempting text for LeetCode chart
    const circleContainer = document.querySelector('.relative.w-48');
    if(circleContainer){
        const attemptingDiv = document.createElement('div');
        attemptingDiv.className = 'attempting-text';
        attemptingDiv.innerText = '2 Attempting'; // Static for now as API might not provide this
        circleContainer.appendChild(attemptingDiv);
    }

    let username = 'Vansh1234Sharma';

    async function load_urls () {
      const response = await fetch('/getenv');
      const data = await response.json();
      username = data[0].LEETCODE_USERNAME;
    }
    load_urls();
    
   
    // Fetch LeetCode Stats
    async function fetchLeetCodeStats() {
        const apiUrl = `https://leetcode-stats-api.herokuapp.com/${username}`;
        
        try {
            const response = await fetch(apiUrl);
            const data = await response.json();
            
            if (data.status === 'success') {
                // Update Text Stats
                document.getElementById('total-solved').innerText = data.totalSolved;
                document.getElementById('total-questions').innerText = '/' + data.totalQuestions;
                
                document.getElementById('easy-solved').innerText = data.easySolved;
                document.getElementById('easy-total').innerText = '/' + data.totalEasy;
                
                document.getElementById('medium-solved').innerText = data.mediumSolved;
                document.getElementById('medium-total').innerText = '/' + data.totalMedium;
                
                document.getElementById('hard-solved').innerText = data.hardSolved;
                document.getElementById('hard-total').innerText = '/' + data.totalHard;

                // Update Circle Chart
                const totalSolved = data.totalSolved;
                const easy = data.easySolved;
                const medium = data.mediumSolved;
                const hard = data.hardSolved;
                
                const circumference = 2 * Math.PI * 90; // r=90
                
                // Calculate lengths
                const easyLength = (easy / totalSolved) * circumference;
                const mediumLength = (medium / totalSolved) * circumference;
                const hardLength = (hard / totalSolved) * circumference;
                
                // Update Easy Segment
                const circleEasy = document.getElementById('circle-easy');
                circleEasy.style.strokeDasharray = `${easyLength} ${circumference}`;
                circleEasy.style.strokeDashoffset = 0;
                
                // Update Medium Segment
                const circleMedium = document.getElementById('circle-medium');
                circleMedium.style.strokeDasharray = `${mediumLength} ${circumference}`;
                circleMedium.style.strokeDashoffset = -easyLength;
                
                // Update Hard Segment
                const circleHard = document.getElementById('circle-hard');
                circleHard.style.strokeDasharray = `${hardLength} ${circumference}`;
                circleHard.style.strokeDashoffset = -(easyLength + mediumLength);
                
            } else {
                console.error('Failed to fetch LeetCode stats');
            }
        } catch (error) {
            console.error('Error fetching LeetCode stats:', error);
        }
    }

    // Call the function
    fetchLeetCodeStats();
 function gotoLeetcode() {
      window.open(`https://leetcode.com/${username}`);
    }
    // Projects List Script
    const list = document.getElementById("list");

    // Safe YouTube ID extractor
    function extractYouTubeID(url) {
      if (!url) return null;
      try {
        const u = new URL(url);
        if (u.searchParams.get("v")) return u.searchParams.get("v");
        if (u.hostname.includes("youtu.be")) return u.pathname.replace("/", "");
        if (u.pathname.includes("/embed/")) return u.pathname.split("/embed/")[1];
        if (u.pathname.includes("/shorts/")) return u.pathname.split("/shorts/")[1];
      } catch (e) {
        return null;
      }
      return null;
    }

    // Fetch projects
    fetch("/other/projects")
      .then(res => res.json())
      .then(projects => {
        list.innerHTML = "";
        projects.forEach((item, index) => {
          if (!item || !item.videoLink || !item.headline) return;

          const id = extractYouTubeID(item.videoLink);
          const thumb = id ? `https://img.youtube.com/vi/${id}/hqdefault.jpg`
                           : "https://via.placeholder.com/300x200?text=No+Image";

          const card = document.createElement("div");
          card.className = "project-card";
          if (index % 2 === 1) card.classList.add("reverse");

          card.innerHTML = `
            <img class="thumb" src="${thumb}" />
            <div class="info">
              <p class="title">${item.headline}</p>
              <a class="link" href="${item.videoLink}" target="_blank">Watch Video</a>
            </div>
          `;
          list.appendChild(card);
        });
      })
      .catch(err => console.log("Fetch error:", err));

    // Mobile Menu Toggle (Assuming this logic was needed as buttons exist)
    const menuToggle = document.getElementById('menuToggle');
    const mobileMenu = document.getElementById('mobileMenu');
    if(menuToggle && mobileMenu){
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
    }
  </script>

</body>
</html>
