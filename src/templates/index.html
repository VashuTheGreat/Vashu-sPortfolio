<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Portfolio Projects - Vashu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Big+Shoulders:opsz,wght@10..72,100..900&family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Martel+Sans:wght@200;300;400;600;700;800;900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js"></script>
  
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      background: linear-gradient(to right, #1f2937, #111827);
      color: #fff;
    }
    
    .project-card {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      border: 1px solid #374151;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .project-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.1), transparent);
      transition: left 0.5s ease;
    }
    
    .project-card:hover::before {
      left: 100%;
    }
    
    .project-card:hover {
      transform: translateY(-5px);
      border-color: #a855f7;
      box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, #7c3aed 0%, #9333ea 100%);
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(168, 85, 247, 0.4);
    }
    
    .btn-edit {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }
    
    .btn-edit:hover {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
    }
    
    .btn-delete {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    }
    
    .btn-delete:hover {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    }
    
    .link-icon {
      transition: all 0.3s ease;
      display: inline-block;
    }
    
    .link-icon:hover {
      transform: scale(1.2);
      color: #a855f7;
    }
    
    .empty-state {
      background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
      border: 2px dashed #374151;
    }
    
    .badge {
      background: rgba(168, 85, 247, 0.2);
      color: #a855f7;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="bg-gradient-to-r from-gray-900 to-blue-900 p-4 sticky top-0 z-50 shadow-lg">
    <div class="container mx-auto flex justify-between sm:justify-evenly items-center">
      <a href="/">
        <div class="logo text-white text-xl md:text-2xl font-bold">Vashu's Portfolio</div>
      </a>

      <button class="md:hidden text-white" id="menuToggle">
        <i class="fas fa-bars" id="menuIcon"></i>
      </button>

      <ul class="md:flex space-x-6 text-white hidden" id="desktopMenu"> 
        <a href="/">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">Home</li>
        </a>
        <a href="/about">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">About</li>
        </a>

        <a href="/otheractivities">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">Other Activities</li>
        </a>
        <a href="/contact">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">Contact Me</li>
        </a>
      </ul>
    </div>
    
    <ul class="md:hidden bg-gray-800 text-white p-4 flex flex-col space-y-4 items-center hidden" id="mobileMenu">
      <a href="/">
        <li class="cursor-pointer hover:text-purple-400 transition-colors">Home</li>
      </a>
      <a href="/about">
        <li class="cursor-pointer hover:text-purple-400 transition-colors">About</li>
      </a>
      <a href="/otheractivities">
          <li class="cursor-pointer hover:text-purple-400 transition-colors">Other Activities</li>
        </a>
      <a href="/contact">
        <li class="cursor-pointer hover:text-purple-400 transition-colors">Contact Me</li>
      </a>
    </ul>
  </nav>

  <!-- Hero Section -->
<div class="section_1 relative flex flex-col md:flex-row items-center justify-center min-h-[calc(100vh-100px)] bg-gradient-to-r from-gray-800 to-gray-900">
  
  <!-- Left Section -->
  <div class="left w-full md:w-1/2 text-white p-8 font-bold text-2xl md:text-4xl flex flex-col justify-center items-center text-center">
    <div>Hi, My name is <span class="text-yellow-400">Vashu</span></div>
    <div>
      and I know 
      <span id="typed-element" class="text-yellow-400" style="font-family: 'Martel Sans', sans-serif; font-weight: 200;">&nbsp;</span>
    </div>
    
    <div class="buttons flex flex-col md:flex-row gap-2 justify-center text-center align-middle mt-4">
      <a href="/contact">
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Hire Me</button>
      </a>
      <a href="#" id="resume" target="_blank">
        <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded">
          View Resume
        </button>
      </a>
    </div>
    
    <a href="#" id="github" target="_blank">
      <button class="github flex items-center gap-2 bg-gray-900 text-white text-sm font-medium px-3 py-2 rounded-lg border border-gray-700 hover:text-blue-400 hover:border-blue-400 transition-all duration-300 mt-4">
        <i class="fab fa-github w-4 h-4"></i>
        View github Profile
      </button>
    </a>


    <a href="#" id="linkedin" target="_blank">
      <button class="github flex items-center gap-2 bg-gray-900 text-white text-sm font-medium px-3 py-2 rounded-lg border border-gray-700 hover:text-blue-400 hover:border-blue-400 transition-all duration-300 mt-4">
        <i class="fab fa-linkedin w-4 h-4"></i>
        View linkedin Profile
      </button>
    </a>
  </div>

  <!-- Right Section -->
  <div class="right w-full md:w-1/2 flex justify-center items-center p-8">
    <div class="w-4/5 md:w-3/5">
      <img src="Developer.png" alt="Developer" class="w-full h-auto" />
    </div>
  </div>

  <hr class="bg-purple-500 border-0 h-0.5 w-9/10 absolute bottom-0 left-1/2 transform -translate-x-1/2" />
</div>

  <!-- Main Content -->
  <div class="container mx-auto px-4 py-12 max-w-7xl">
    <!-- Header Section -->
    <div class="text-center mb-12">
      <p class="text-gray-400 text-lg mb-2">Showcase of my work</p>
      <div class="flex justify-center items-center mb-4">
        <img src='work.png' style="width: 10vw;" alt='work'/>
      </div>
      <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
        MY PROJECTS
      </h1>
      <hr class="border-t-2 border-purple-500 w-32 mx-auto mb-6" />
      <p class="text-gray-300 max-w-2xl mx-auto">
        Explore the collection of projects I've built using various technologies and frameworks
      </p>
    </div>

    <!-- Add New Project Button -->
    <div class="flex justify-center mb-8">
      <button id="addRedirect" class="btn-primary text-white font-bold py-3 px-6 rounded-lg shadow-lg flex items-center gap-2">
        <i class="fas fa-plus"></i>
        Add New Project
      </button>
    </div>

    <!-- Projects Grid -->
    <div id="projectsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"></div>

    <!-- Empty State -->
    <div id="emptyMsg" class="empty-state rounded-lg p-12 text-center hidden">
      <i class="fas fa-folder-open text-6xl text-gray-600 mb-4"></i>
      <h3 class="text-2xl font-semibold text-gray-400 mb-2">No Projects Yet</h3>
      <p class="text-gray-500 mb-6">Start building your portfolio by adding your first project</p>
      <button class="btn-primary text-white font-bold py-2 px-6 rounded-lg addProjectBtn">
        <i class="fas fa-plus mr-2"></i>
        Create Your First Project
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-6 mt-12">
    <div class="container mx-auto flex flex-col md:flex-row justify-between items-center px-6">
      <div class="mb-4 md:mb-0">
        <h2 class="text-2xl font-bold text-purple-500">Vashu</h2>
      </div>

      <ul class="flex space-x-6 text-gray-400">
        <li><a href="./" class="hover:text-purple-400 cursor-pointer transition-colors">Home</a></li>
        <li><a href="./about" class="hover:text-purple-400 cursor-pointer transition-colors">About</a></li>
        <li><a href="./otheractivities" class="hover:text-purple-400 cursor-pointer transition-colors">Other Activities</a></li>
        <li><a href="./contact" class="hover:text-purple-400 cursor-pointer transition-colors">Contact</a></li>
      </ul>

      <div class="flex space-x-4">
        <a href="#" class="hover:text-purple-400 transition-colors">
          <i class="fab fa-github text-2xl"></i>
        </a>
        <a href="#" class="hover:text-purple-400 transition-colors">
          <i class="fab fa-linkedin text-2xl"></i>
        </a>
        <a href="#" class="hover:text-purple-400 transition-colors">
          <i class="fab fa-twitter text-2xl"></i>
        </a>
      </div>
    </div>

    <div class="text-center text-gray-500 text-sm mt-4">
      Â© <script>document.write(new Date().getFullYear());</script> Vashu. All rights reserved.
    </div>
  </footer>

  <script>
    const github = document.getElementById('github');
    const linkedin = document.getElementById('linkedin');
    const resume =document.getElementById('resume')
    async function load_urls () {
      console.log("me cal hua hu bhai")
      const response = await fetch('/getenv');
      const data = await response.json();
      github.href = "https://github.com/"+data[0].GITHUB_USERNAME;
      linkedin.href = "https://linkedin.com/in/"+data[0].LINKEDIN_USERNAME;
      resume.href = data[0].RESUME;
    }
    load_urls();
    const projectsGrid = document.getElementById('projectsGrid');
    const emptyMsg = document.getElementById('emptyMsg');
    const addBtn = document.getElementById('addRedirect');

    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.getElementById('menuToggle');
      const mobileMenu = document.getElementById('mobileMenu');
      const menuIcon = document.getElementById('menuIcon');
      let isOpen = false;

      if (menuToggle) {
        menuToggle.addEventListener('click', function() {
          isOpen = !isOpen;
          
          if (isOpen) {
            mobileMenu.classList.remove('hidden');
            menuIcon.classList.remove('fa-bars');
            menuIcon.classList.add('fa-times');
          } else {
            mobileMenu.classList.add('hidden');
            menuIcon.classList.remove('fa-times');
            menuIcon.classList.add('fa-bars');
          }
        });
      }

      // Initialize Typed.js
      if (typeof Typed !== 'undefined') {
        new Typed('#typed-element', {
          strings: ["CSE Engineer","Data Science","Machine Learning","Generative AI","Backend", "Web Developement"],
          typeSpeed: 100,
          backSpeed: 50,
          loop: true,
          showCursor: true,
          cursorChar: "|",
        });
      }
    });

    // Fetch and display projects
    async function loadProjects() {
      try {
        const res = await fetch('/projects');
        if (!res.ok) throw new Error('Failed to load');
        const data = await res.json();
        renderProjects(data || []);
      } catch (err) {
        console.error(err);
        renderProjects([]);
      }
    }

    // Render only projects that have a videoLink; show YouTube thumbnail when possible
    function getYouTubeId(url) {
      if (!url) return null;
      // common YouTube URL formats
      const patterns = [
        /(?:youtube\.com\/(?:watch\?v=|embed\/|v\/)|youtu\.be\/)([A-Za-z0-9_-]{11})/,
        /youtube\.com.*[?&]v=([A-Za-z0-9_-]{11})/
      ];
      for (const p of patterns) {
        const m = url.match(p);
        if (m && m[1]) return m[1];
      }
      return null;
    }

    function renderProjects(items) {
      projectsGrid.innerHTML = '';

      const videoItems = (items || []).filter(p => p && p.videoLink);
      if (!videoItems.length) {
        projectsGrid.classList.add('hidden');
        emptyMsg.classList.remove('hidden');
        return;
      }

      projectsGrid.classList.remove('hidden');
      emptyMsg.classList.add('hidden');

      videoItems.forEach((p, idx) => {
        const card = document.createElement('div');
        card.className = 'project-card rounded-lg p-6 shadow-xl';

        const ytId = getYouTubeId(p.videoLink);
        let mediaHtml = '';
        if (ytId) {
          const thumb = `https://img.youtube.com/vi/${ytId}/hqdefault.jpg`;
          mediaHtml = `
            <a href="${escapeAttr(p.videoLink)}" target="_blank" style="display:block;position:relative">
              <img src="${thumb}" alt="${escapeAttr(p.projectName||'video')}" style="width:100%;height:auto;border-radius:6px;display:block" />
              <div style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none">
                <i class="fas fa-play-circle" style="font-size:48px;color:rgba(255,255,255,0.9)"></i>
              </div>
            </a>
          `;
        } else {
          // non-YouTube: show simple link card
          mediaHtml = `
            <a href="${escapeAttr(p.videoLink)}" target="_blank" class="link-icon text-gray-400 hover:text-purple-400 flex items-center gap-2">
              <i class="fas fa-video text-2xl"></i>
              <span class="text-sm">Watch Video</span>
            </a>
          `;
        }

        card.innerHTML = `
          <div class="flex justify-between items-start mb-4">
            <span class="badge">#${idx + 1}</span>
          </div>
          <h3 class="text-xl font-bold mb-3 text-purple-400">${escapeHtml(p.projectName || 'Untitled Project')}</h3>
          ${mediaHtml}
        `;

        projectsGrid.appendChild(card);
      });
    }

    // Add New Project button handlers
    addBtn.addEventListener('click', handleAddProject);
    
    document.querySelectorAll('.addProjectBtn').forEach(btn => {
      btn.addEventListener('click', handleAddProject);
    });

    async function handleAddProject(e) {
      e.preventDefault();
      const password = prompt("Enter admin password:");
      if (!password) return;
      window.location.href = `/admin?password=${encodeURIComponent(password)}`;
    }

    function escapeHtml(s) {
      return String(s).replace(/[&<>"']/g, c => ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;'
      }[c]));
    }

    function escapeAttr(s) {
      return String(s).replace(/"/g, '&quot;');
    }

    // Load projects on page load
    loadProjects();
  </script>
</body>
</html>